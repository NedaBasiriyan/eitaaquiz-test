<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ุนุถูุช ุฏุฑ ฺฉุงูุงู โ ูุณุงุจูู</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="background-main">
    <div class="neon-box join-box">
      <h2>ุจุฑุง ุดุฑฺฉุช ุฏุฑ ูุณุงุจููุ ุงุจุชุฏุง ุฏุฑ ฺฉุงูุงู ุฒุฑ ุนุถู ุดูุฏ</h2>

      <p class="channel">@hamserr</p>
      <p class="channel-desc">๐จโ๐ฉโ๐ง ุทูุงูุ ููุฑูุ ูููู ู ูุดุงูุฑู ุญููู โ ุฏฺฉุชุฑ ููุฑูุงู</p>

      <div style="display:flex;gap:10px;justify-content:center;margin-top:12px;flex-wrap:wrap">
        <a class="btn-secondary" id="open-channel" href="https://eitaa.com/hamserr" target="_blank" rel="noopener">
          ุจุงุฒ ฺฉุฑุฏู ุตูุญู ฺฉุงูุงู
        </a>

        <button class="btn-primary" id="paste-code-btn" onclick="showCodeInput()">
          โ ูู ุนุถู ุดุฏู โ ฺฉุฏ ุนุถูุช ุฏุงุฑู
        </button>
      </div>

      <div id="code-area" style="display:none;margin-top:14px;">
        <p>ฺฉุฏ ฺฉู ุฏุฑ ูพุณุช ุฎูุดโุขูุฏ ฺฉุงูุงู ููุชุดุฑ ุดุฏู ุฑุง ูุงุฑุฏ ฺฉูุฏ:</p>
        <input id="joinCodeInput" placeholder="ฺฉุฏ ุนุถูุช ุฑุง ุงูุฌุง ูุงุฑุฏ ฺฉูุฏ" style="padding:10px;border-radius:8px;width:80%;"/>
        <div style="margin-top:10px;">
          <button class="btn-primary" id="confirm-join">ุชุฃุฏ ู ุงุฏุงูู ูุณุงุจูู</button>
        </div>
        <p style="margin-top:10px;color:#bfe">ุงฺฏุฑ ฺฉุฏ ุฑุง ููโุจูุฏุ ุงุฒ ูุฏุฑ ฺฉุงูุงู ุจุฎูุงูุฏ ฺฉุฏ ุฑุง ูุฌุฏุฏุงู ููุชุดุฑ ฺฉูุฏ ุง ุงุฒ ุฏฺฉููโ ุชูุงุณ ุฏุฑ ูพูู ูุฏุฑุช ุงุณุชูุงุฏู ฺฉูุฏ.</p>
      </div>

      <p class="note">ูพุณ ุงุฒ ูุงุฑุฏ ฺฉุฑุฏู ฺฉุฏุ ุณุณุชู ุจุฑุฑุณ ูโฺฉูุฏ ู ุฏุฑ ุตูุฑุช ุณุงุฒฺฏุงุฑ ุดูุง ุจู ูุณุงุจูู ูุฏุงุช ูโุดูุฏ.</p>
    </div>
  </div>

<script>
function showCodeInput(){
  document.getElementById('code-area').style.display = 'block';
  document.getElementById('joinCodeInput').focus();
}

// ููฺฏุงู ุชุฃุฏ: ฺฺฉ ูโฺฉูู ฺฉู ูุฑูุฏ ุจุง JoinCode ุฐุฎุฑูโุดุฏู ุฏุฑ localStorage ุง config (ุงุฒ admin) ุจุฑุงุจุฑ ุจุงุดุฏ.
document.getElementById('confirm-join').addEventListener('click', ()=>{
  const entered = (document.getElementById('joinCodeInput').value || '').trim();
  if(!entered){
    alert('ูุทูุงู ฺฉุฏ ุนุถูุช ุฑุง ูุงุฑุฏ ฺฉูุฏ.');
    return;
  }
  // ููุฏุงุฑ ุฐุฎุฑูโุดุฏู (admin ุฏุฑ localStorage ุง fallback ุจู config.json)
  const cfg = JSON.parse(localStorage.getItem('quizConfig') || '{}');
  const stored = cfg.joinCode || '';
  if(!stored){
    // fallback: ุงฺฏุฑ admin ูููุฒ ฺฉุฏ ุชุนู ูฺฉุฑุฏูุ ุงุฌุงุฒู ููุฏู ู ูพุงู ูุฏู
    alert('ฺฉุฏ ุนุถูุช ูููุฒ ุชูุณุท ูุฏุฑ ุชูุธู ูุดุฏู โ ูุทูุงู ุงูุฏฺฉ ุตุจุฑ ฺฉูุฏ ุง ุงุฒ ูุฏุฑ ฺฉุฏ ุฑุง ุฏุฑุฎูุงุณุช ฺฉูุฏ.');
    return;
  }
  if(entered === stored){
    // ุงุนุชุจุงุฑุณูุฌ ูููู
    localStorage.setItem('joinedChannel', 'true');
    // ุฐุฎุฑู ุฒูุงู ุนุถูุช ุจุฑุง ุจุฑุฑุณโูุง ุงุญุชูุงู
    localStorage.setItem('joinedAt', new Date().toISOString());
    // ุจุงุฒฺฏุดุช ุจู ุตูุญู ุงุตู ูุณุงุจูู
    window.location.href = 'quiz.html';
  } else {
    alert('ฺฉุฏ ูุงุฑุฏ ุดุฏู ูุงูุนุชุจุฑ ุงุณุช. ูุทูุงู ุฏููุงู ฺฉุฏ ฺฉู ุฏุฑ ฺฉุงูุงู ููุชุดุฑ ุดุฏู ุฑุง ูุงุฑุฏ ฺฉูุฏ.');
  }
});
</script>
</body>
</html>
