<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†ØªÛŒØ¬Ù‡ Ù…Ø³Ø§Ø¨Ù‚Ù‡</title>
<link rel="stylesheet" href="style.css">
<style>
  body {
    font-family: Vazirmatn, sans-serif;
    direction: rtl;
    text-align: center;
    background: linear-gradient(180deg,#061d32,#0b223f);
    color: #fff;
    padding: 40px 15px;
  }
  .result-card {
    background: rgba(255,255,255,0.05);
    padding: 25px;
    border-radius: 15px;
    max-width: 400px;
    margin: auto;
    box-shadow: 0 0 10px rgba(0,255,224,0.12);
  }
  h2 { color: #00ffe0; margin-bottom: 15px; }
  .score { font-size: 1.6rem; margin: 10px 0; color: #cfffdf; font-weight: bold; }
  .rank { font-size: 1.2rem; color: #ffd; margin-bottom: 15px; }
  .reward { background: rgba(0,255,224,0.08); padding: 10px; border-radius: 10px; margin-bottom: 15px; color: #aaffff; }
  button {
    background: #00ffe0;
    border: none;
    color: #000;
    font-weight: bold;
    padding: 12px 20px;
    border-radius: 10px;
    cursor: pointer;
    margin: 10px;
    transition: .2s;
  }
  button:hover { background: #00ffb0; }
</style>
</head>
<body>
  <div class="result-card">
    <h2>ğŸ¯ Ù†ØªÛŒØ¬Ù‡ Ù…Ø³Ø§Ø¨Ù‚Ù‡</h2>
    <div id="scoreDisplay" class="score"></div>
    <div id="rankDisplay" class="rank"></div>
    <div id="rewardBox" class="reward"></div>
    <button id="retryBtn">ğŸ” Ø´Ø±Ú©Øª Ø¯ÙˆØ¨Ø§Ø±Ù‡</button>
    <button id="exitBtn">ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</button>
  </div>

<script>
  const score = Number(localStorage.getItem('ongoingScore') || 0);
  const totalQ = JSON.parse(localStorage.getItem('quizConfig') || '{}').questions?.length || 10;

  const scoreEl = document.getElementById('scoreDisplay');
  const rankEl = document.getElementById('rankDisplay');
  const rewardEl = document.getElementById('rewardBox');

  // Ù†Ù…Ø§ÛŒØ´ Ø§Ù…ØªÛŒØ§Ø²
  scoreEl.innerText = `Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§: ${score} Ø§Ø² ${totalQ * 5}`;

  // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø±ØªØ¨Ù‡ ØªÙ‚Ø±ÛŒØ¨ÛŒ
  let rank = 'Ø´Ø±Ú©Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡';
  let reward = 'Ù…ØªØ´Ú©Ø±ÛŒÙ… Ø§Ø² Ø­Ø¶ÙˆØ± Ø´Ù…Ø§ ğŸŒ·';

  if(score >= totalQ * 5 * 0.9){
    rank = 'ğŸ¥‡ Ø±ØªØ¨Ù‡ Ø§ÙˆÙ„';
    reward = 'ØªØ¨Ø±ÛŒÚ©! Ø´Ù…Ø§ Ø¨Ø±Ù†Ø¯Ù‡ Ø¬Ø§ÛŒØ²Ù‡ ÙˆÛŒÚ˜Ù‡ Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ø´Ø¯ÛŒØ¯ ğŸ';
  } else if(score >= totalQ * 5 * 0.75){
    rank = 'ğŸ¥ˆ Ø±ØªØ¨Ù‡ Ø¯ÙˆÙ…';
    reward = 'Ø®ÛŒÙ„ÛŒ Ø¹Ø§Ù„ÛŒ! Ø´Ù…Ø§ Ø¯Ø± Ø¨ÛŒÙ† Ù†ÙØ±Ø§Øª Ø¨Ø±ØªØ± Ù‡Ø³ØªÛŒØ¯ ğŸ…';
  } else if(score >= totalQ * 5 * 0.6){
    rank = 'ğŸ¥‰ Ø±ØªØ¨Ù‡ Ø³ÙˆÙ…';
    reward = 'Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø®ÙˆØ¨! Ø´Ù…Ø§ Ø¯Ø± Ø¬Ù…Ø¹ Ø¨Ø±Ú¯Ø²ÛŒØ¯Ú¯Ø§Ù† Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±ÛŒØ¯ ğŸ‘';
  } else if(score >= totalQ * 5 * 0.3){
    rank = 'âœ… Ø´Ø±Ú©Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡ ÙØ¹Ø§Ù„';
    reward = 'Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡! Ù†Ø²Ø¯ÛŒÚ© Ø¨Ù‡ Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯Ù† Ù‡Ø³ØªÛŒ ğŸ’ª';
  }

  rankEl.innerText = rank;
  rewardEl.innerText = reward;

  // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
  document.getElementById('retryBtn').onclick = ()=>{
    localStorage.removeItem('ongoingScore');
    localStorage.removeItem('currentQuestion');
    window.location.href = 'quiz.html';
  };

  document.getElementById('exitBtn').onclick = ()=>{
    localStorage.removeItem('ongoingScore');
    localStorage.removeItem('currentQuestion');
    window.location.href = 'index.html';
  };
</script>
</body>
</html>
