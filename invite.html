<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ุฏุนูุช ุงุฒ ุฏูุณุชุงู</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="background-main">

    <div class="top-header">
      <img class="logo" src="assets/images/logo-main.png" alt="ููฺฏู">
    </div>

    <main class="quiz-area neon-box">
      <h1>๐ฏ ุฏุนูุช ุงุฒ ุฏูุณุชุงู</h1>
      <p>ุจุฑุง ฺฉุณุจ ุงูุชุงุฒ ุจุดุชุฑุ ููฺฉ ุฒุฑ ุฑุง ุจู ุฏูุณุชุงูุชุงู ุจุฏูุฏ:</p>
      <input readonly id="invite-link">
      <button id="copy-invite" class="btn-small">ฺฉูพ ููฺฉ</button>
      <p id="ref-count"></p>

      <div style="margin-top:20px;">
        <button onclick="location.href='index.html'" class="btn-primary">ุจุงุฒฺฏุดุช ุจู ุตูุญู ุงุตู</button>
      </div>
    </main>

    <script>
      let userInviteId = localStorage.getItem('userInviteId');
      if(!userInviteId){
        userInviteId = Math.floor(Math.random()*900000+100000).toString();
        localStorage.setItem('userInviteId', userInviteId);
      }

      const inviteInput = document.getElementById('invite-link');
      inviteInput.value = window.location.origin + window.location.pathname.replace(/[^/]*$/,'') + 'quiz.html?ref=' + userInviteId;

      const referrals = JSON.parse(localStorage.getItem('referrals')||'{}');
      const refCount = referrals[userInviteId] || 0;
      document.getElementById('ref-count').innerText = `ุชุนุฏุงุฏ ุงูุฑุงุฏ ฺฉู ุจุง ููฺฉ ุดูุง ุนุถู ุดุฏูุฏ: ${refCount}`;

      document.getElementById('copy-invite').addEventListener('click', ()=>{
        inviteInput.select();
        inviteInput.setSelectionRange(0, 99999);
        document.execCommand('copy');
        alert('ููฺฉ ุฏุนูุช ฺฉูพ ุดุฏ!');
      });
    </script>

  </div>
</body>
</html>
